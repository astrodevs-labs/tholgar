[[{"l":"Overview","p":["Logo","Tholgar is a DeFi protocol that build products on top of other DeFi protocol enabling users to gain higher yield than alone.","We empower synergy with Paladin Vote stakeholders to build products that will benefit the whole ecosystem.","Our first product is an auto-compounder built on top of Warlord. It will let anyone join a vault and gain higher and more optimized yield in a non custodial manner."]}],[{"l":"Swapper","p":["This is an contract that will handle all of the swaps for the vault. So far it will use an router to swap any tokens and send them back to the sender. It is set as another contract to be able to change it in the future if the paradigm of router change drastically. It is meant to be used in a push / pull manner with the swap function."]},{"l":"State Variables"},{"l":"swapRouter","p":["Dex/aggregaor router to call to perform swaps"]},{"l":"tokenTransferAddress","p":["Address to allow to swap tokens"]},{"l":"vault","p":["Address of the ERC4626 vault"]},{"l":"Functions"},{"l":"onlyVault"},{"l":"constructor"},{"l":"setSwapRouter","p":["Set the dex/aggregator router to call to perform swaps","Parameters","Name","Type","Description","newSwapRouter","address","address of the router"]},{"l":"setTokenTransferAddress","p":["Set the token proxy address to allow to swap tokens","Parameters","Name","Type","Description","newTokenTransferAddress","address","address of the token proxy"]},{"l":"setVault","p":["Set the vault address","Parameters","Name","Type","Description","newVault","address","address of the vault"]},{"l":"recoverERC20","p":["Recover ERC2O tokens in the contract","Parameters","Name","Type","Description","token","address","Address of the ERC2O token","Returns","none","bool","bool: success"]},{"l":"swap","p":["Swap tokens using the router/aggregator","The calldatas should set the recipient of the tokens to the vault","Parameters","Name","Type","Description","tokens","address[]","array of tokens to swap","callDatas","bytes[]","array of bytes to call the router/aggregator"]},{"l":"_performRouterSwap","p":["Perform the swap using the router/aggregator","Parameters","Name","Type","Description","callData","bytes","bytes to call the router/aggregator"]},{"l":"Events"},{"l":"SwapRouterUpdated","p":["Event emitted when the swap router is updated"]},{"l":"TokenTransferAddressUpdated","p":["Event emitted when the token proxy is updated"]},{"l":"VaultUpdated","p":["Event emitted when the vault is updated"]}],[{"l":"Vault","p":["This is the main contract of the Warlord protocol. It allows user to deposit WAR that will then be staked in the Warlord staking contract. It also handles the harvest and compound logic of the vault. Some admions functions are here to handle fees and pause the contract if needed. The Vault itself can change staker but not the underlying asset."]},{"l":"State Variables"},{"l":"staker","p":["Address of the stkWAR token"]},{"l":"minter","p":["Address of the WAR minter contract"]},{"l":"swapper","p":["Address of the swapper contract"]},{"l":"MAX_BPS","p":["Max BPS value (100%)"]},{"l":"harvestFee","p":["fee to be applied when harvesting rewards"]},{"l":"feeRecipient","p":["address to receive the harvest fee"]},{"l":"feeToken","p":["token to be used to pay the harvest fee"]},{"l":"operator","p":["operator caller address to allow access only to web3 function"]},{"l":"Functions"},{"l":"constructor"},{"l":"setStaker","p":["update the staker contract to a new one","Parameters","Name","Type","Description","newStaker","address","the new staker contract"]},{"l":"setOperator"},{"l":"setSwapper","p":["update the swapper contract to a new one","Parameters","Name","Type","Description","newSwapper","address","the new swapper contract"]},{"l":"setMinter","p":["update the minter contract to a new one","Parameters","Name","Type","Description","newMinter","address","the new minter contract"]},{"l":"setHarvestFee"},{"l":"setFeeRecipient"},{"l":"setFeeToken"},{"l":"recoverERC20","p":["Recover ERC2O tokens in the contract","Parameters","Name","Type","Description","token","address","Address of the ERC2O token","Returns","none","bool","bool: success"]},{"l":"pause","p":["Pause the contract"]},{"l":"unpause","p":["Unpause the contract"]},{"l":"totalAssets","p":["totalAssets is the total number of stkWAR"]},{"l":"deposit"},{"l":"mint"},{"l":"withdraw"},{"l":"redeem"},{"l":"afterDeposit","p":["stake assets after each deposit"]},{"l":"beforeWithdraw","p":["unstake assets before each withdraw to have enough WAR to transfer"]},{"l":"harvest","p":["Harvest all rewards from staker","calldatas should swap from all reward tokens to feeToken","Parameters","Name","Type","Description","tokensToHarvest","address[]","tokens to harvest","tokensToSwap","tokens to swap to feeToken","callDatas","bytes[]","swapper routes to swap to feeToken"]},{"l":"compound","p":["Turn all rewards into more staked assets","Parameters","Name","Type","Description","tokensToSwap","address[]","tokens which includes the feeToken to swap to more assets","callDatas","bytes[]","swapper routes to swap to more assets","tokensToMint","tokens to mint more stkWAR"]},{"l":"Events"},{"l":"StakerUpdated","p":["Event emitted when a staker is updated"]},{"l":"MinterUpdated","p":["Event emitted when a minter is updated"]},{"l":"SwapperUpdated","p":["Event emitted when a swapper is updated"]},{"l":"Harvested","p":["Event emitted when reward have been harvested"]},{"l":"Compounded","p":["Event emitted when rewards are compounded into more stkWAR"]},{"l":"HarvestFeeUpdated","p":["Event emitted when harvestFee is updated"]},{"l":"FeeRecipientUpdated","p":["Event emitted when feeRecipient is updated"]},{"l":"FeeTokenUpdated","p":["Event emitted when feeToken is updated"]},{"l":"OperatorUpdated","p":["Event emitted when a output tokens and/or ratios are updated"]}],[{"l":"Zap","p":["This is an util contract to ease the deposit of aura/cvx into the vault. It will first mint WAR with the amount of aura/cvx you want to deposit, then deposit it into the vault for tWAR."]},{"l":"State Variables"},{"l":"asset","p":["Address of war token"]},{"l":"vault","p":["Address of the auto compounding war vault"]},{"l":"minter","p":["Address of the war minter"]},{"l":"Functions"},{"l":"constructor"},{"i":"zap-1","l":"zap","p":["address","Address of the token to deposit","Address to stake for","amount","Amount to deposit","Description","Name","none","Parameters","receiver","Returns","token","Type","uint256","uint256 : Amount of shares minted","Zaps a given amount of tokens to mint WAR and deposit it"]},{"l":"zapMultiple","p":["address","Address to stake for","address[]","amounts","Amounts to deposit for each token","Description","List of token addresses to deposit","Name","none","Parameters","receiver","Returns","Type","uint256","uint256 : Amount of shares minted","uint256[]","vlTokens","Zaps given amounts of tokens to mint WAR and deposit it"]},{"l":"Events"},{"l":"ZapHappened","p":["Event emitted when a zap happens"]}],[{"i":"twar","l":"$tWAR"},{"i":"what-is-war-","l":"What is WAR ?","p":["WAR is an ERC-20 token that is always redeemable for its backing assets. As a governance index, WAR is composed of Convex (CVX) and Aura (AURA) which is vote-locked to generate yield. All rewards and yield are sent back to WAR stakers. At the moment, WAR accepts only these two assets but the system can be adapted to other vlTokens.","The only way to mint WAR is by depositing either CVX or AURA, or both. When minting, users will receive WAR directly. To then start earning with WAR, users must stake WAR to earn their rewards and vote incentive yield. Vote incentives are distributed in WETH and are managed by Paladin’s delegation address. BAL and CRV are earned as auraBAL and cvxCRV to farm more AURA & BAL and CVX & CRV while it's not claimed. Other rewards include PAL, FXS and cvxFXS. Also, any AURA or CVX earned is auto-compounded into more WAR. Users who don’t stake their WAR forfeit their yield to other stakers.","Users who wish to exit the Warlord system will need to redeem their WAR tokens for their backing. The redemption ratio will depend on the current ratio of locked assets within the system. Once redeemed, the WAR will be queued for the unlock date of each asset. CVX and AURA will unlock at separate dates depending on their availability. Once available, users will be able to claim their tokens. Note: assets in the redeem queue do not earn yield."]},{"i":"what-is-twar-","l":"What is tWAR ?","p":["tWAR is an ERC20 token that represents the shares of the underlying amount of $WAR held by the vault. It means that for example if a user hold 10 $tWAR and the total amount of $tWAR is 1000, the user owns 1% of the $WAR held in the vault.","It uses the ERC4626 standard to implement this feature and follow industry standard. This token will then be able to be used in other DeFi protocols.","This vault is an auto-compounder meaning that instead of earning yield directly through $WAR, it will claim this yield then recompound it every week for more $WAR."]},{"i":"how-does-the-auto-compounding-works-","l":"How does the auto compounding works ?","p":["We have implemented the auto-compounder in a way that it will claim all the rewards every week and then recompound them into the vault. It will optimize the yield in the long term by not claiming cvxCRV and auraBAL rewards to first farm more WAR and then have less gas fees. It will also arbitrage the current weight of CVX and AURA to mint more WAR.","The process is first we harvest rewards with the harvest function and swap them using an router such as Paraswap into feeToken. Then we compound rewards using the compound function and swap the feeToken back into CVX or AURA to then mint more WAR and stake it.","All of the code of the server that will make the calls is open source and can be found in the operator directory. We also aim in the future to use a decentralised way instead of a centralised server to make the calls."]},{"l":"Fees","p":["The only fee taken by the vault is 5% of the yield harvested only in WETH (excluding WAR directly harvested). This fee is used to cover gas fees and will decline as the Vault grows."]},{"l":"Security","p":["We follow the industry standard for smart contract development and use the solmate library to implement our contracts.","All of the funds held by the Vault are non custodial meaning that admins will never be able to access them."]}],[{"l":"Deposit","p":["Currently, two set of tokens can be deposited : WAR and AURA/CVX. The process is nearly the same for both sets."]},{"l":"Deposit WAR"},{"l":"Accessing WAR deposit","p":["The war deposit is the default option when the app is loaded. You can still retrieve it by selecting the deposit tab and selecting WAR token in the bottom-left dropdown.","WAR Deposit"]},{"l":"Depositing"},{"l":"Enter amount","p":["Enter the desired amount of WAR you wish to deposit and click the \"Deposit\" button."]},{"l":"Approval","p":["A dialog will open by first asking you to approve the WAR spending (according to ERC-20 standards). You can select to approve only your deposit amount or approve the max spending to avoid this step on the following deposits.","Approve allowances"]},{"i":"deposit-1","l":"Deposit","p":["You will then be prompted to sign the transaction to deposit. This is the final step."]},{"l":"Verify","p":["The \"Circulating Supply\" and \"War Locked\" stats should be increased by your deposit amount. If it is not immediatly the case, try to refresh you page.","Deposited"]},{"i":"deposit-auracvx","l":"Deposit AURA/CVX"},{"i":"accessing-auracvx-deposit","l":"Accessing AURA/CVX deposit","p":["To access AURA/CVX deposit, you need to change the deposit token(s) by using the bottom-left dropdown in the deposit tab.","Aura/CVX deposit"]},{"i":"depositing-1","l":"Depositing"},{"i":"enter-amount-1","l":"Enter amount","p":["Enter the desired amount of AURA and/or CVX you wish to deposit and click the \"Deposit\" button."]},{"i":"approval-1","l":"Approval","p":["A dialog will open by first asking you to approve the AURA and CVX spendings (according to ERC-20 standards). You can select to approve only your deposit amount or approve the max spending to avoid those step on the following deposits.","Approve AURA allowances Approve CVX allowances"]},{"i":"deposit-2","l":"Deposit","p":["You will then be prompted to sign the transaction to deposit. This is the final step."]},{"i":"verify-1","l":"Verify","p":["The \"Circulating Supply\" and \"War Locked\" stats should be increased by your deposit amounts wheighted by the current ratios. If it is not immediatly the case, try to refresh you page.","Deposited"]}],[{"l":"Overview"},{"i":"what-is-warlord-","l":"What is Warlord ?","p":["Warlord is an index of governance tokens which gains yield and that will auto compound some rewards into WAR + optimize the overall yield with an auto voter on most rewarding vote incentives. You can read more about it here."]},{"i":"what-is-the-warlord-vault-","l":"What is the Warlord Vault ?","p":["It is a product built by Tholgar team. This is an auto-compounder built on top of Warlord. It will let anyone join a vault and gain higher and more optimized yield in a non custodial manner.","All vote incentives will be claimed every week and auto-compounded into the vault gaining even more yield.","It uses the ERC4626 standard to follow the industry standart developped by yearn to enable more composability with other protocols."]},{"l":"Addresses","p":["Vault: 0x188cA46Aa2c7ae10C14A931512B62991D5901453","Zap: 0x0598c652eEB0F95137Af02f32022005139453744","Swapper: 0x4247d145049B426d39f19F41555137D9cB154B99"]}],[{"l":"Redeem","p":["To redeem in AURA/CVX, you will first have to withdraw your tWAR into WAR tokens ( see how).","Once you have WAR tokens in your wallet, you will need to go to Paladin's Warlord app to initiate the reddem process.","The instructions can be found here https://doc.paladin.vote/warlord/redeeming-war"]}],[{"l":"Withdraw","p":["You can currently withdraw your tWAR into WAR tokens."]},{"l":"Accessing WAR withdraw","p":["You can access the WAR withdraw by selecting the withdraw tab.","WAR Withdraw"]},{"l":"Withdrawing"},{"l":"Enter amount","p":["Enter the desired amount of tWAR you wish to withdraw and click the \"Withdraw\" button."]},{"i":"withdraw-1","l":"withdraw","p":["A dialog will open by first asking you to sign the withdraw transaction.","Approve allowances"]},{"l":"Verify","p":["The \"Circulating Supply\" and \"War Locked\" stats should be decreased by your withdraw amount. If it is not immediatly the case, try to refresh you page.","Deposited"]}]]